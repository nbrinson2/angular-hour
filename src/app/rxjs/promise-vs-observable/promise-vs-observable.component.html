<app-example-display
  header="Promise vs Observable"
  description="This example demonstrates the difference between promises and observables."
  [codeSnippets]="promiseVsObservableCode"
>
  <app-example-info
    heading="Key Differences"
    [item]="exampleInfo"
  ></app-example-info>
  <app-example-info
    heading="Use Cases"
    [item]="exampleInfo2"
  ></app-example-info>
  
  <div class="demo-container">
    <!-- Promise Section -->
    <section class="demo-section promise-section">
      <div class="section-header">
        <mat-icon class="section-icon">schedule</mat-icon>
        <h3>Promise - Single Value</h3>
        <p class="section-description">One-time execution with a single result</p>
      </div>

      <div class="content-area">
        <div class="button-container">
          <button
            mat-raised-button
            color="primary"
            (click)="fetchPromise()"
            [disabled]="loadingPromise"
            class="action-button"
          >
            <mat-icon *ngIf="!loadingPromise">cloud_download</mat-icon>
            <mat-progress-spinner
              *ngIf="loadingPromise"
              mode="indeterminate"
              diameter="20"
              class="button-spinner"
            >
            </mat-progress-spinner>

            <span>{{ loadingPromise ? 'Loading...' : 'Fetch Value Once' }}</span>
          </button>
        </div>

        <div class="result-container" *ngIf="promiseResult || loadingPromise">
          <mat-card class="result-card" [@fadeInUp]>
            <mat-card-header>
              <mat-icon mat-card-avatar class="result-icon">check_circle</mat-icon>
              <mat-card-title>Promise Result</mat-card-title>
              <mat-card-subtitle>Single value response</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <div class="result-value" *ngIf="promiseResult">
                <span class="value-label">Value:</span>
                <span class="value-text">{{ promiseResult }}</span>
              </div>
              <div class="loading-placeholder" *ngIf="loadingPromise">
                <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                <p>Fetching data...</p>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </section>

    <!-- Observable Section -->
    <section class="demo-section observable-section">
      <div class="section-header">
        <mat-icon class="section-icon">stream</mat-icon>
        <h3>Observable - Stream</h3>
        <p class="section-description">Continuous stream with multiple emissions</p>
      </div>

      <div class="content-area">
        <div class="button-container">
          <button
            mat-raised-button
            color="accent"
            (click)="startStream()"
            [disabled]="streaming"
            class="action-button"
          >
            <mat-icon *ngIf="!streaming">play_arrow</mat-icon>
            <mat-progress-spinner
              *ngIf="streaming"
              mode="indeterminate"
              diameter="20"
              class="button-spinner"
            >
            </mat-progress-spinner>
            <span>{{ streaming ? 'Streaming...' : 'Start Stream' }}</span>
          </button>

          <button
            mat-stroked-button
            color="warn"
            (click)="stopStream()"
            [disabled]="!streaming"
            class="action-button secondary"
          >
            <mat-icon>stop</mat-icon>
            <span>Stop Stream</span>
          </button>
        </div>

        <div class="result-container" *ngIf="streamValues.length > 0 || streaming">
          <mat-card class="result-card stream-card" [@fadeInUp]>
            <mat-card-header>
              <mat-icon mat-card-avatar class="result-icon">timeline</mat-icon>
              <mat-card-title>Observable Stream</mat-card-title>
              <mat-card-subtitle>{{ streamValues.length }} values received</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <div class="stream-values" *ngIf="streamValues.length > 0">
                <div class="values-grid">
                  <div 
                    *ngFor="let value of streamValues; trackBy: trackByValue" 
                    class="value-item"
                    [@valueSlideIn]
                  >
                    <span class="value-number">{{ value }}</span>
                  </div>
                </div>
              </div>
              <div class="streaming-indicator" *ngIf="streaming">
                <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                <p>Receiving stream data...</p>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </section>
  </div>
</app-example-display>
